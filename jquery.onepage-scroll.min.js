(function(){jQuery(function(a){return a.onepage_scroll=function(b,c){var d;return this.settings={},this.$element=a(b),d=function(){return Modernizr.csstransitions&&Modernizr.csstransforms3d},this.transformPage=function(b,c){var e,f=this;return c="function"!=typeof c?a.noop:c,e=100*(b-1)*-1,d()?(this.$element.css({transform:"translate3d(0, "+e+"%, 0)",transition:"all "+this.settings.animationTime+"ms "+this.settings.easing,"-webkit-transform":"translate3d(0, "+e+"%, 0)","-webkit-transition":"all "+this.settings.animationTime+"ms "+this.settings.easing}),this.$element.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return f.settings.afterMove(b),c(b)})):this.$element.animate({top:""+e+"%"},function(){return f.settings.afterMove(b),c(b)}),this},this.moveDown=function(){var b;return b=a(""+this.settings.sectionContainer+".active").data("index"),this.moveTo(b+1)},this.moveUp=function(){var b;return b=a(""+this.settings.sectionContainer+".active").data("index"),this.moveTo(b-1)},this.moveTo=function(b){var c,d,e,f,g=this;if(c=a(""+this.settings.sectionContainer+".active"),d=c.data("index"),b!==d){if(e=b,this.settings.smooth&&Math.abs(d-b)>1&&(e=b>d?d+1:d-1),1>e||e>this.total){if(!this.settings.loop)return;e=1>e?this.total:1}return f=a(""+this.settings.sectionContainer+"[data-index='"+e+"']"),this.settings.beforeMove(c.data("index")),c.removeClass("active"),f.addClass("active"),this.settings.pagination&&(a(".onepage-pagination li a.active").removeClass("active"),a(".onepage-pagination li a[data-index='"+e+"']").addClass("active")),a("body").removeClass("viewing-page-"+c.data("index")).addClass("viewing-page-"+f.data("index")),this.settings.updateURL&&this.updateHistory(e),this.settings.smooth&&b!==e?this.transformPage(e,function(){return g.moveTo(b)}):this.transformPage(e)}},this.updateHistory=function(a){var b;return history.replaceState&&(b=window.location.href.substr(0,""+window.location.href.indexOf("#")+"#"+a),history.pushState({},document.title,b)),this},this.bindScrollEvents=function(){var b=this;return a(document).bind("mousewheel.onepage DOMMouseScroll.onepage",function(a){var c;return a.preventDefault(),c=a.originalEvent.wheelDelta||-a.originalEvent.detail,b.init_scroll(a,c)}),this},this.unbindScrollEvents=function(){return a(document).unbind("mousewheel.onepage DOMMouseScroll.onepage"),this},this.swipeUp=function(b,c){return a("body").hasClass("disabled-onepage-scroll")?void 0:(b.preventDefault(),b.gesture.preventDefault(),c.moveDown())},this.swipeDown=function(b,c){return a("body").hasClass("disabled-onepage-scroll")?void 0:(b.preventDefault(),b.gesture.preventDefault(),c.moveUp())},this.bindSwipeEvents=function(){var a,b,c,d=this;return a=this.$element.hammer(),c=function(a){return d.swipeUp(a,d)},b=function(a){return d.swipeDown(a,d)},a.on("swipedown.onepage",c),a.on("swipeup.onepage",b),this},this.unbindSwipeEvents=function(){var a,b,c,d=this;return a=this.$element.hammer(),c=function(a){return d.swipeUp(a,d)},b=function(a){return d.swipeDown(a,d)},a.off("swipedown.onepage",c),a.off("swipeup.onepage",b),this},this.bindKeyEvents=function(){var b=this;return a(document).on("keydown.onepage",function(c){var d;if(d=c.target.nodeName,"INPUT"!==d&&"TEXTAREA"!==d&&!a("body").hasClass("disabled-onepage-scroll")){switch(c.which){case 33:case 38:b.moveUp();break;case 34:case 40:b.moveDown();break;case 36:b.moveTo(1);break;case 35:b.moveTo(b.total);break;default:return}return c.preventDefault()}}),this},this.unbindKeyEvents=function(){return a(document).unbin("keydown.onepage"),this},this.responsive=function(){return a(window).width()<this.settings.responsiveFallback?(a("body").addClass("disabled-onepage-scroll"),this.unbindScrollEvents(),this.unbindSwipeEvents()):(a("body").hasClass("disabled-onepage-scroll")&&(a("body").removeClass("disabled-onepage-scroll"),a("html, body, .wrapper").animate({scrollTop:0},"fast")),this.bindSwipeEvents(),this.bindScrollEvents()),this},this.init_scroll=function(a,b){var c,d;return c=b,d=(new Date).getTime(),d-this.lastAnimation<this.quietPeriod+this.settings.animationTime?(a.preventDefault(),void 0):(0>c?this.moveDown():this.moveUp(),this.lastAnimation=d,this)},this.bindPagination=function(){var b=this;return a(".onepage-pagination li a").on("click.onepage",function(c){var d;return d=a(c.currentTarget).data("index"),b.moveTo(d)}),this},this.init=function(){var b,d,e,f=this;return this.settings=a.extend({},this.defaults,c),this.sections=a(this.settings.sectionContainer),this.total=this.sections.length,this.lastAnimation=0,this.quietPeriod=500,this.paginationList="",this.$element.addClass("onepage-wrapper").css("position","relative"),e=0,a.each(this.sections,function(b,c){return a(c).addClass("section").attr("data-index",b+1).css({position:"absolute",top:""+e+"%"}),e+=100,f.settings.pagination?f.paginationList+="<li><a data-index='"+(b+1)+"' href='#"+(b+1)+"'></a></li>":void 0}),this.settings.pagination&&(a("<ul class='onepage-pagination'>"+this.paginationList+"</ul>").prependTo("body"),d=this.$element.find(".onepage-pagination").height()/2*-1,this.$element.find(".onepage-pagination").css("margin-top",d)),a(""+this.settings.sectionContainer+"[data-index='1']").addClass("active"),a("body").addClass("viewing-page-1"),this.settings.pagination&&a(".onepage-pagination li a[data-index='1']").addClass("active"),a(window).scrollTop(0),""!==window.location.hash&&"#1"!==window.location.hash&&(b=window.location.hash.replace("#",""),this.moveTo(b)),this.settings.pagination&&this.bindPagination(),this.settings.responsiveFallback!==!1?(a(window).resize(function(){return f.responsive()}),this.responsive()):(this.bindSwipeEvents(),this.bindScrollEvents()),this.settings.keyboard&&this.bindKeyEvents(),this},this.init(),this},a.onepage_scroll.prototype.defaults={sectionContainer:"section",easing:"ease",animationTime:1e3,pagination:!0,keyboard:!1,updateURL:!1,beforeMove:a.noop,afterMove:a.noop,loop:!1,responsiveFallback:!1,smooth:!1},a.fn.onepage_scroll=function(b){return this.each(function(){var c;return void 0===a(this).data("onepage_scroll")?(c=new a.onepage_scroll(this,b),a(this).data("onepage_scroll",c)):void 0}),1===this.length&&void 0!==a(this).data("onepage_scroll")?a(this).data("onepage_scroll"):void 0}})}).call(this);